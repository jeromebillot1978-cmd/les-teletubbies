<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Trading Crypto Multichain</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        .container { max-width: 1800px; margin: 0 auto; }
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .card h2 {
            color: #60a5fa;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #60a5fa;
            padding-bottom: 10px;
        }
        .exchange-grid, .wallet-grid, .chain-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .exchange-btn, .wallet-btn, .chain-btn {
            padding: 15px;
            border: 2px solid rgba(96, 165, 250, 0.3);
            background: rgba(15, 23, 42, 0.5);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .exchange-btn:hover, .wallet-btn:hover, .chain-btn:hover {
            border-color: #60a5fa;
            background: rgba(96, 165, 250, 0.1);
            transform: translateY(-2px);
        }
        .exchange-btn.active, .wallet-btn.active, .chain-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            border-color: #60a5fa;
        }
        .input-group { margin-bottom: 15px; }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #e2e8f0;
            font-weight: 600;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.1);
            background: rgba(15, 23, 42, 0.5);
            color: white;
            border-radius: 8px;
            font-size: 14px;
        }
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        .btn-primary { background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%); color: white; }
        .btn-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; }
        .btn-danger { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(96, 165, 250, 0.4); }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }
        .status.connected { background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid #10b981; }
        .status.disconnected { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid #ef4444; }
        .balance-display { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
        .balance-item {
            background: rgba(15, 23, 42, 0.5);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .balance-label { font-size: 0.9em; color: #94a3b8; }
        .balance-value { font-size: 1.5em; font-weight: bold; color: #60a5fa; margin-top: 5px; }
        .log {
            max-height: 400px;
            overflow-y: auto;
            background: rgba(15, 23, 42, 0.5);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .log-entry {
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 5px;
            border-left: 3px solid #60a5fa;
            background: rgba(30, 41, 59, 0.5);
        }
        .log-entry.success { border-left-color: #10b981; }
        .log-entry.error { border-left-color: #ef4444; }
        .log-entry .timestamp { color: #94a3b8; font-size: 0.85em; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(15, 23, 42, 0.5); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #60a5fa; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Bot de Trading Crypto Multichain</h1>
        
        <div class="dashboard">
            <div class="card">
                <h2>‚õìÔ∏è Blockchain</h2>
                <div class="chain-grid">
                    <button class="chain-btn" id="chain-ethereum"><span>üíé</span> Ethereum</button>
                    <button class="chain-btn" id="chain-bsc"><span>üü°</span> BSC</button>
                    <button class="chain-btn" id="chain-polygon"><span>üü£</span> Polygon</button>
                    <button class="chain-btn" id="chain-arbitrum"><span>üîµ</span> Arbitrum</button>
                    <button class="chain-btn" id="chain-avalanche"><span>üî¥</span> Avalanche</button>
                    <button class="chain-btn" id="chain-solana"><span>üåê</span> Solana</button>
                </div>
                <div id="chainStatus" class="status disconnected">‚ùå Aucune blockchain s√©lectionn√©e</div>
                <div class="input-group">
                    <label>Network actuel</label>
                    <input type="text" id="currentNetwork" readonly value="Non connect√©">
                </div>
            </div>

            <div class="card">
                <h2>üí∞ Wallet</h2>
                <div class="wallet-grid">
                    <button class="wallet-btn" id="wallet-metamask">ü¶ä MetaMask</button>
                    <button class="wallet-btn" id="wallet-phantom">üëª Phantom</button>
                    <button class="wallet-btn" id="wallet-trust">üíô Trust Wallet</button>
                    <button class="wallet-btn" id="wallet-coinbase">üíº Coinbase</button>
                </div>
                <div id="walletStatus" class="status disconnected">‚ùå Aucun wallet connect√©</div>
                <div class="input-group">
                    <label>Adresse Wallet</label>
                    <input type="text" id="walletAddress" readonly placeholder="0x...">
                </div>
                <button class="btn btn-primary" id="connectWalletBtn">Connecter Wallet</button>
                <div class="balance-display">
                    <div class="balance-item">
                        <div class="balance-label">ETH/BNB</div>
                        <div class="balance-value" id="nativeBalance">0.0000</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">USDT</div>
                        <div class="balance-value" id="usdtBalance">0.00</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üîó Exchange</h2>
                <div class="exchange-grid">
                    <button class="exchange-btn" id="exchange-binance"><span>üü°</span> Binance</button>
                    <button class="exchange-btn" id="exchange-coinbase"><span>üîµ</span> Coinbase</button>
                    <button class="exchange-btn" id="exchange-uphold"><span>üü¢</span> Uphold</button>
                    <button class="exchange-btn" id="exchange-kraken"><span>üü£</span> Kraken</button>
                </div>
                <div id="exchangeStatus" class="status disconnected">‚ùå Aucun exchange s√©lectionn√©</div>
                <div class="input-group">
                    <label>API Key</label>
                    <input type="text" id="apiKey" placeholder="Cl√© API">
                </div>
                <div class="input-group">
                    <label>API Secret</label>
                    <input type="password" id="apiSecret" placeholder="Secret API">
                </div>
                <button class="btn btn-primary" id="connectExchangeBtn">Connecter Exchange</button>
            </div>

            <div class="card">
                <h2>‚öôÔ∏è Configuration</h2>
                <div id="botStatus" class="status disconnected">‚è∏Ô∏è Bot Arr√™t√©</div>
                <div class="input-group">
                    <label>Paire de Trading</label>
                    <select id="tradingPair">
                        <option value="BTCUSDT">BTC/USDT</option>
                        <option value="ETHUSDT">ETH/USDT</option>
                        <option value="BNBUSDT">BNB/USDT</option>
                        <option value="SOLUSDT">SOL/USDT</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Montant par Trade (USDT)</label>
                    <input type="number" id="tradeAmount" value="50" min="10">
                </div>
                <div class="input-group">
                    <label>Stop Loss (%)</label>
                    <input type="number" id="stopLoss" value="2" min="0.1" step="0.1">
                </div>
                <div class="input-group">
                    <label>Take Profit (%)</label>
                    <input type="number" id="takeProfit" value="3" min="0.1" step="0.1">
                </div>
                <button class="btn btn-success" id="startBotBtn">‚ñ∂Ô∏è D√©marrer Bot</button>
                <button class="btn btn-danger" id="stopBotBtn" style="display:none;">‚èπÔ∏è Arr√™ter Bot</button>
                <div class="balance-display" style="margin-top: 20px;">
                    <div class="balance-item">
                        <div class="balance-label">Trades</div>
                        <div class="balance-value" id="totalTrades">0</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">P&L</div>
                        <div class="balance-value" id="profitLoss">$0.00</div>
                    </div>
                </div>
            </div>

            <div class="card" style="grid-column: span 2;">
                <h2>üìù Logs en Temps R√©el</h2>
                <div class="log" id="logContainer"></div>
            </div>
        </div>
    </div>

    <script>
        var state = {
            selectedChain: null,
            selectedWallet: null,
            selectedExchange: null,
            chainConnected: false,
            walletConnected: false,
            exchangeConnected: false,
            walletAddress: null,
            isRunning: false,
            balance: { native: 0, usdt: 0 },
            stats: { trades: 0, profitLoss: 0 }
        };

        var CHAINS = {
            ethereum: { chainId: '0x1', name: 'Ethereum Mainnet', currency: 'ETH' },
            bsc: { chainId: '0x38', name: 'BSC Mainnet', currency: 'BNB' },
            polygon: { chainId: '0x89', name: 'Polygon Mainnet', currency: 'MATIC' },
            arbitrum: { chainId: '0xa4b1', name: 'Arbitrum One', currency: 'ETH' },
            avalanche: { chainId: '0xa86a', name: 'Avalanche C-Chain', currency: 'AVAX' },
            solana: { chainId: 'solana', name: 'Solana Mainnet', currency: 'SOL' }
        };

        function addLog(msg, type) {
            var c = document.getElementById('logContainer');
            var e = document.createElement('div');
            e.className = 'log-entry ' + (type || 'info');
            var t = new Date().toLocaleTimeString();
            e.innerHTML = '<span class="timestamp">[' + t + ']</span> ' + msg;
            c.insertBefore(e, c.firstChild);
            if (c.children.length > 100) c.removeChild(c.lastChild);
        }

        function selectChain(id) {
            document.querySelectorAll('.chain-btn').forEach(function(b) { b.classList.remove('active'); });
            document.getElementById('chain-' + id).classList.add('active');
            state.selectedChain = id;
            var info = CHAINS[id];
            document.getElementById('chainStatus').className = 'status disconnected';
            document.getElementById('chainStatus').textContent = info.name + ' s√©lectionn√©';
            document.getElementById('currentNetwork').value = info.name;
            addLog('Blockchain ' + info.name + ' s√©lectionn√©e');
        }

        function selectWallet(id) {
            document.querySelectorAll('.wallet-btn').forEach(function(b) { b.classList.remove('active'); });
            document.getElementById('wallet-' + id).classList.add('active');
            state.selectedWallet = id;
            addLog('Wallet ' + id + ' s√©lectionn√©');
        }

        function selectExchange(id) {
            document.querySelectorAll('.exchange-btn').forEach(function(b) { b.classList.remove('active'); });
            document.getElementById('exchange-' + id).classList.add('active');
            state.selectedExchange = id;
            document.getElementById('exchangeStatus').textContent = id.toUpperCase() + ' s√©lectionn√©';
            addLog('Exchange ' + id.toUpperCase() + ' s√©lectionn√©');
        }

        async function connectWallet() {
            if (!state.selectedWallet) { addLog('S√©lectionnez un wallet', 'error'); return; }
            if (!state.selectedChain) { addLog('S√©lectionnez une blockchain', 'error'); return; }
            if (state.selectedWallet === 'metamask') {
                await connectMetaMask();
            } else if (state.selectedWallet === 'phantom') {
                await connectPhantom();
            } else {
                simulateWallet();
            }
        }

        async function connectMetaMask() {
            if (typeof window.ethereum === 'undefined') {
                addLog('MetaMask non install√©!', 'error');
                if (confirm('Installer MetaMask?')) window.open('https://metamask.io/download/', '_blank');
                return;
            }
            try {
                addLog('Connexion MetaMask...', 'success');
                var accs = await window.ethereum.request({ method: 'eth_requestAccounts' });
                if (!accs || accs.length === 0) throw new Error('Aucun compte');
                var addr = accs[0];
                state.walletAddress = addr;
                document.getElementById('walletAddress').value = addr;
                addLog('Connect√©: ' + addr.substring(0, 10) + '...', 'success');
                var info = CHAINS[state.selectedChain];
                if (info.chainId !== 'solana') await switchChain(info.chainId);
                await getBalance(addr);
                state.walletConnected = true;
                state.chainConnected = true;
                document.getElementById('walletStatus').className = 'status connected';
                document.getElementById('walletStatus').textContent = 'Connect√©: ' + addr.substring(0, 10) + '...';
                document.getElementById('chainStatus').className = 'status connected';
            } catch (err) {
                if (err.code === 4001) addLog('Connexion refus√©e', 'error');
                else addLog('Erreur: ' + err.message, 'error');
            }
        }

        async function switchChain(cid) {
            try {
                await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: cid }] });
                addLog('R√©seau chang√©', 'success');
            } catch (err) {
                if (err.code === 4902) await addChain(cid);
                else throw err;
            }
        }

        async function addChain(cid) {
            var info = CHAINS[state.selectedChain];
            try {
                await window.ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [{ chainId: cid, chainName: info.name, rpcUrls: ['https://bsc-dataseed.binance.org'], nativeCurrency: { name: info.currency, symbol: info.currency, decimals: 18 } }]
                });
                addLog('R√©seau ajout√©', 'success');
            } catch (err) {
                addLog('Erreur: ' + err.message, 'error');
            }
        }

        async function getBalance(addr) {
            try {
                var bal = await window.ethereum.request({ method: 'eth_getBalance', params: [addr, 'latest'] });
                var eth = parseInt(bal, 16) / 1e18;
                state.balance.native = eth.toFixed(4);
                document.getElementById('nativeBalance').textContent = state.balance.native;
                addLog('Balance: ' + state.balance.native + ' ' + CHAINS[state.selectedChain].currency, 'success');
            } catch (err) {
                addLog('Erreur balance: ' + err.message, 'error');
            }
        }

        async function connectPhantom() {
            if (typeof window.solana === 'undefined' || !window.solana.isPhantom) {
                addLog('Phantom non install√©!', 'error');
                if (confirm('Installer Phantom?')) window.open('https://phantom.app/', '_blank');
                return;
            }
            try {
                addLog('Connexion Phantom...', 'success');
                var resp = await window.solana.connect();
                var addr = resp.publicKey.toString();
                state.walletAddress = addr;
                document.getElementById('walletAddress').value = addr;
                addLog('Connect√©: ' + addr.substring(0, 10) + '...', 'success');
                state.walletConnected = true;
                state.chainConnected = true;
                document.getElementById('walletStatus').className = 'status connected';
                document.getElementById('walletStatus').textContent = 'Connect√© (Solana)';
                document.getElementById('chainStatus').className = 'status connected';
            } catch (err) {
                addLog('Erreur: ' + err.message, 'error');
            }
        }

        function simulateWallet() {
            state.walletConnected = true;
            state.chainConnected = true;
            document.getElementById('walletStatus').className = 'status connected';
            document.getElementById('walletStatus').textContent = 'Connect√© (DEMO)';
            document.getElementById('chainStatus').className = 'status connected';
            state.balance.native = (Math.random() * 2).toFixed(4);
            document.getElementById('nativeBalance').textContent = state.balance.native;
            addLog('Mode DEMO activ√©', 'success');
        }

        function connectExchange() {
            if (!state.selectedExchange) { addLog('S√©lectionnez un exchange', 'error'); return; }
            addLog('Connexion ' + state.selectedExchange.toUpperCase() + ' (DEMO)', 'success');
            state.exchangeConnected = true;
            document.getElementById('exchangeStatus').className = 'status connected';
            document.getElementById('exchangeStatus').textContent = state.selectedExchange.toUpperCase() + ' connect√© (DEMO)';
        }

        function startBot() {
            if (!state.walletConnected && !state.exchangeConnected) {
                addLog('Connectez un wallet ou exchange', 'error');
                return;
            }
            state.isRunning = true;
            document.getElementById('botStatus').className = 'status connected';
            document.getElementById('botStatus').textContent = 'Bot actif';
            document.getElementById('startBotBtn').style.display = 'none';
            document.getElementById('stopBotBtn').style.display = 'block';
            addLog('Bot d√©marr√©!', 'success');
            setTimeout(function() { if (state.isRunning) executeTrade(); }, 10000);
        }

        function stopBot() {
            state.isRunning = false;
            document.getElementById('botStatus').className = 'status disconnected';
            document.getElementById('botStatus').textContent = 'Bot arr√™t√©';
            document.getElementById('startBotBtn').style.display = 'block';
            document.getElementById('stopBotBtn').style.display = 'none';
            addLog('Bot arr√™t√©', 'error');
        }

        async function executeTrade() {
            if (!state.isRunning) return;
            var amt = parseFloat(document.getElementById('tradeAmount').value);
            var pair = document.getElementById('tradingPair').value;
            addLog('Trade: ' + pair + ' - ' + amt + ' USDT', 'success');
            if (state.walletConnected && typeof window.ethereum !== 'undefined') {
                await doBlockchainTrade(amt);
            } else {
                doSimTrade(amt);
            }
            if (state.isRunning) setTimeout(executeTrade, 15000);
        }

        async function doBlockchainTrade(amt) {
            try {
                addLog('TRANSACTION R√âELLE', 'success');
                var accs = await window.ethereum.request({ method: 'eth_accounts' });
                var from = accs[0];
                var cid = await window.ethereum.request({ method: 'eth_chainId' });
                addLog('Montant: 0.01 ' + CHAINS[state.selectedChain].currency, 'success');
                addLog('V√âRIFIEZ avant de confirmer!', 'error');
                var dead = '0x000000000000000000000000000000000000dEaD';
                var val = '0x' + (10000000000000000).toString(16);
                var tx = { from: from, to: dead, value: val };
                var hash = await window.ethereum.request({ method: 'eth_sendTransaction', params: [tx] });
                addLog('TX envoy√©e: ' + hash.substring(0, 20) + '...', 'success');
                var exps = { '0x1': 'https://etherscan.io/tx/', '0x38': 'https://bscscan.com/tx/', '0x89': 'https://polygonscan.com/tx/', '0xa4b1': 'https://arbiscan.io/tx/', '0xa86a': 'https://snowtrace.io/tx/' };
                addLog('Explorer: ' + (exps[cid] || '') + hash, 'success');
                state.stats.trades++;
                var prof = (Math.random() - 0.4) * amt * 0.05;
                state.stats.profitLoss += prof;
                document.getElementById('totalTrades').textContent = state.stats.trades;
                document.getElementById('profitLoss').textContent = '$' + state.stats.profitLoss.toFixed(2);
                setTimeout(function() { getBalance(from); }, 5000);
            } catch (err) {
                if (err.code === 4001) addLog('TX refus√©e', 'error');
                else if (err.code === -32603) addLog('Fonds insuffisants', 'error');
                else addLog('Erreur: ' + err.message, 'error');
            }
        }

        function doSimTrade(amt) {
            var prof = (Math.random() - 0.35) * amt * 0.05;
            state.stats.trades++;
            state.stats.profitLoss += prof;
            addLog('Trade simul√©: ' + (prof > 0 ? 'PROFIT' : 'PERTE') + ' ' + prof.toFixed(2) + ' USDT', prof > 0 ? 'success' : 'error');
            document.getElementById('totalTrades').textContent = state.stats.trades;
            document.getElementById('profitLoss').textContent = '$' + state.stats.profitLoss.toFixed(2);
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('chain-ethereum').onclick = function() { selectChain('ethereum'); };
            document.getElementById('chain-bsc').onclick = function() { selectChain('bsc'); };
            document.getElementById('chain-polygon').onclick = function() { selectChain('polygon'); };
            document.getElementById('chain-arbitrum').onclick = function() { selectChain('arbitrum'); };
            document.getElementById('chain-avalanche').onclick = function() { selectChain('avalanche'); };
            document.getElementById('chain-solana').onclick = function() { selectChain('solana'); };
            document.getElementById('wallet-metamask').onclick = function() { selectWallet('metamask'); };
            document.getElementById('wallet-phantom').onclick = function() { selectWallet('phantom'); };
            document.getElementById('wallet-trust').onclick = function() { selectWallet('trust'); };
            document.getElementById('wallet-coinbase').onclick = function() { selectWallet('coinbase'); };
            document.getElementById('exchange-binance').onclick = function() { selectExchange('binance'); };
            document.getElementById('exchange-coinbase').onclick = function() { selectExchange('coinbase'); };
            document.getElementById('exchange-uphold').onclick = function() { selectExchange('uphold'); };
            document.getElementById('exchange-kraken').onclick = function() { selectExchange('kraken'); };
            document.getElementById('connectWalletBtn').onclick = connectWallet;
            document.getElementById('connectExchangeBtn').onclick = connectExchange;
            document.getElementById('startBotBtn').onclick = startBot;
            document.getElementById('stopBotBtn').onclick = stopBot;
            addLog('Syst√®me pr√™t!', 'success');
            addLog('1. S√©lectionnez blockchain', 'success');
            addLog('2. Connectez wallet', 'success');
            addLog('3. D√©marrez le bot', 'success');
        });
    </script>
</body>
</html>
